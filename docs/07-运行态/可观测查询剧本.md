# 可观测查询剧本（CAP-003 最小实现）

## 目的

提供可执行的最小查询入口，保证可以从 `traceId` 回查链路结果与耗时。

## 最小字段规范

- `traceId`: 全链路唯一追踪标识
- `result`: 链路结果（例如 `success` / `fail`）
- `durationMs`: 端到端耗时（毫秒）

## 命令入口

1. 生成可查询 trace：

```bash
scripts/obs/smoke-trace.sh --out artifacts/CAP-003/manual
```

2. 回查 trace：

```bash
scripts/obs/query-trace.sh "$(cat artifacts/CAP-003/manual/traceId.txt)" --out artifacts/CAP-003/manual
```

## 产物说明

- `traceId.txt`: 供后续查询命令复用
- `trace.json`: 查询结果（包含 `traceId`、`result`、`durationMs`）
